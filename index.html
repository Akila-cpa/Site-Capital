<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Table avec Boutons</title>
    <!-- Ajout de Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
</head>
<body>

<div class="container mt-4">
    <table class="table table-bordered">
        <!DOCTYPE html>
        <html lang="fr">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <title>Table avec Boutons</title>
            <!-- Ajout de Bootstrap CSS -->
            
            
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

        </head>
        <body>
        
        
            <div class="container mt-4">
                <table class="table table-bordered">
                    <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">Agence</th>
                        <th scope="col">N° Sous.</th>
                        <th scope="col">Seg. </th>
                        <th scope="col">Client</th>
                        <th scope="col">Actions</th>
                        <th scope="col">Montant</th>
                        <th scope="col" text="text-center">    Actions à faire    </th>
                      </tr>
                    </thead>
                    <tbody class="table-group-divider">
                      
                        <p>Nombre d'actions : {{ actions|length }}</p>
                        {% if actions %}
                        {% for action in actions %}
                          
                            <tr>
                                <th scope="row" class="red-text">{{ forloop.counter }}</th>
                                <td class="blue-text">{{ action.0 }}</td>
                                <td class="green-text">{{ action.1 }}</td>
                                <td class="red-text">{{ action.2 }}</td>
                                <td class="red-text">{{ action.3 }}</td>
                                <td class="red-text">{{ action.4 }}</td>
                                <td class="red-text">{{ action.5 }}</td>

                                <td>
                                  <button type="button" class="btn btn-warning btn-sm"
                                  onclick="animateAndRedirect(this, `{% url 'modifier' action.0 action.2 %}`)" >
                                  Annuler
                              </button>
                                    <button type="button" class="btn btn-success btn-sm">Sauvegarder</button>
                                    <button type="button" class="btn btn-danger btn-sm">Supprimer</button>
                                    
                                </td>
                              </tr>
                              
                         
                        {% endfor %}
                      {% else %}
                          <tr>
                            <td colspan="5" class="text-center">Aucune donnée disponible</td>
                          </tr>
                      {% endif %}
                    </tbody>
                </table>
            </div>

<!-- Ajout du JS Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  function animateAndRedirect(button, url) {
    let confirmation = confirm("Voulez-vous vraiment modifier cette action ?");
    if (confirmation)
      {window.location.href = url; 
      button.classList.replace("btn-primary", "btn-warning");  // Change la couleur en jaune
      button.innerText = "En cours";  // Change le texte
      button.disabled = true;  // Désactive le bouton temporairement


      setTimeout(() => {
      window.location.href = url;  // Redirige vers l'URL Django après 1 seconde
      }, 1000);
      }
    else{}
}
  </script>


</body>
</html>
